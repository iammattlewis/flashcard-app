{"ast":null,"code":"import _defineProperty from\"/Users/matthewlewis/Documents/GitHub/Flashcard-App/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/matthewlewis/Documents/GitHub/Flashcard-App/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/matthewlewis/Documents/GitHub/Flashcard-App/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/matthewlewis/Documents/GitHub/Flashcard-App/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/matthewlewis/Documents/GitHub/Flashcard-App/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from\"react\";import{useParams,Link,useHistory}from\"react-router-dom\";import{readDeck,readCard,updateCard}from\"../utils/api\";import CardForm from\"./CardForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditCard(){var mountedRef=useRef(false);var _useParams=useParams(),deckId=_useParams.deckId,cardId=_useParams.cardId;var history=useHistory();var initialCardState={id:\"\",front:\"\",back:\"\",deckId:\"\"};var _useState=useState({name:\"loading...\",description:\"\"}),_useState2=_slicedToArray(_useState,2),deck=_useState2[0],setDeck=_useState2[1];var _useState3=useState(initialCardState),_useState4=_slicedToArray(_useState3,2),editCard=_useState4[0],setEditCard=_useState4[1];useEffect(function(){mountedRef.current=true;return function(){mountedRef.current=false;};},[]);useEffect(function(){var abortController=new AbortController();function loadDeck(){return _loadDeck.apply(this,arguments);}function _loadDeck(){_loadDeck=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var loadedDeck;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return readDeck(deckId,abortController.signal);case 3:loadedDeck=_context.sent;if(mountedRef.current){setDeck(function(){return loadedDeck;});}_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);if(!(_context.t0.name!==\"AbortError\")){_context.next=11;break;}throw _context.t0;case 11:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return _loadDeck.apply(this,arguments);}loadDeck();return function(){abortController.abort();};},[deckId]);useEffect(function(){var abortController=new AbortController();function loadCard(){return _loadCard.apply(this,arguments);}function _loadCard(){_loadCard=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var loadedCard;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return readCard(cardId,abortController.signal);case 3:loadedCard=_context2.sent;if(mountedRef.current){setEditCard(function(){return loadedCard;});}_context2.next=11;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);if(!(_context2.t0.name!==\"AbortError\")){_context2.next=11;break;}throw _context2.t0;case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return _loadCard.apply(this,arguments);}loadCard();return function(){abortController.abort();};},[cardId]);var changeHandler=function changeHandler(_ref){var target=_ref.target;setEditCard(function(currentState){return _objectSpread(_objectSpread({},currentState),{},_defineProperty({},target.name,target.value));});};var submitHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(event){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:event.preventDefault();_context3.next=3;return updateCard(editCard);case 3:setEditCard(initialCardState);history.push(\"/decks/\".concat(deckId));case 5:case\"end\":return _context3.stop();}},_callee3);}));return function submitHandler(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"breadcrumb\",children:/*#__PURE__*/_jsxs(\"ol\",{className:\"breadcrumb\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsxs(Link,{to:\"/\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-home\"}),\" Home\"]})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/decks/\".concat(deckId),children:deck.name})}),/*#__PURE__*/_jsxs(\"li\",{className:\"breadcrumb-item active\",\"aria-current\":\"page\",children:[\"Edit Card \",cardId]})]})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Edit Card\"}),/*#__PURE__*/_jsx(CardForm,{changeHandler:changeHandler,submitHandler:submitHandler,newCardData:editCard,deckId:deckId})]});}export default EditCard;","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","Link","useHistory","readDeck","readCard","updateCard","CardForm","jsx","_jsx","jsxs","_jsxs","EditCard","mountedRef","_useParams","deckId","cardId","history","initialCardState","id","front","back","_useState","name","description","_useState2","_slicedToArray","deck","setDeck","_useState3","_useState4","editCard","setEditCard","current","abortController","AbortController","loadDeck","_loadDeck","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","loadedDeck","wrap","_callee$","_context","prev","next","signal","sent","t0","stop","abort","loadCard","_loadCard","_callee2","loadedCard","_callee2$","_context2","changeHandler","_ref","target","currentState","_objectSpread","_defineProperty","value","submitHandler","_ref2","_callee3","event","_callee3$","_context3","preventDefault","push","concat","_x","Fragment","children","className","to","newCardData"],"sources":["/Users/matthewlewis/Documents/GitHub/Flashcard-App/src/Layout/EditCard.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { useParams, Link, useHistory } from \"react-router-dom\";\nimport { readDeck, readCard, updateCard } from \"../utils/api\";\nimport CardForm from \"./CardForm\";\n\nfunction EditCard() {\n  const mountedRef = useRef(false);\n  const { deckId, cardId } = useParams();\n  const history = useHistory();\n\n  const initialCardState = { id: \"\", front: \"\", back: \"\", deckId: \"\" };\n  const [deck, setDeck] = useState({\n    name: \"loading...\",\n    description: \"\",\n  });\n  const [editCard, setEditCard] = useState(initialCardState);\n\n  useEffect(() => {\n    mountedRef.current = true;\n    return () => {\n      mountedRef.current = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    const abortController = new AbortController();\n    async function loadDeck() {\n      try {\n        const loadedDeck = await readDeck(deckId, abortController.signal);\n        if (mountedRef.current) {\n          setDeck(() => loadedDeck);\n        }\n      } catch (error) {\n        if (error.name !== \"AbortError\") {\n          throw error;\n        }\n      }\n    }\n\n    loadDeck();\n    return () => {\n      abortController.abort();\n    };\n  }, [deckId]);\n\n  useEffect(() => {\n    const abortController = new AbortController();\n    async function loadCard() {\n      try {\n        const loadedCard = await readCard(cardId, abortController.signal);\n        if (mountedRef.current) {\n          setEditCard(() => loadedCard);\n        }\n      } catch (error) {\n        if (error.name !== \"AbortError\") {\n          throw error;\n        }\n      }\n    }\n    loadCard();\n    return () => {\n      abortController.abort();\n    };\n  }, [cardId]);\n\n  const changeHandler = ({ target }) => {\n    setEditCard((currentState) => ({\n      ...currentState,\n      [target.name]: target.value,\n    }));\n  };\n\n  const submitHandler = async (event) => {\n    event.preventDefault();\n    await updateCard(editCard);\n    setEditCard(initialCardState);\n    history.push(`/decks/${deckId}`);\n  };\n\n  return (\n    <React.Fragment>\n      <nav aria-label=\"breadcrumb\">\n        <ol className=\"breadcrumb\">\n          <li className=\"breadcrumb-item\">\n            <Link to=\"/\">\n              <i className=\"fas fa-home\"></i> Home\n            </Link>\n          </li>\n          <li className=\"breadcrumb-item\">\n            <Link to={`/decks/${deckId}`}>{deck.name}</Link>\n          </li>\n          <li className=\"breadcrumb-item active\" aria-current=\"page\">\n            Edit Card {cardId}\n          </li>\n        </ol>\n      </nav>\n      <h1 className=\"text-center\">Edit Card</h1>\n      <CardForm\n        changeHandler={changeHandler}\n        submitHandler={submitHandler}\n        newCardData={editCard}\n        deckId={deckId}\n      />\n    </React.Fragment>\n  );\n}\n\nexport default EditCard;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}