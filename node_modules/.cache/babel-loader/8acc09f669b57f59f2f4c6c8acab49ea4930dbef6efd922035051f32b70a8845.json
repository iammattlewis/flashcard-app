{"ast":null,"code":"import _regeneratorRuntime from\"/Users/matthewlewis/Documents/GitHub/Flashcard-App/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/matthewlewis/Documents/GitHub/Flashcard-App/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/matthewlewis/Documents/GitHub/Flashcard-App/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/matthewlewis/Documents/GitHub/Flashcard-App/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useRef}from\"react\";import{Link,useHistory}from\"react-router-dom\";import{deleteDeck,listDecks}from\"../utils/api/index.js\";import CreateDeck from\"./CreateDeck.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){var mountedRef=useRef(false);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),decks=_useState2[0],setDecks=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showCreateForm=_useState4[0],setShowCreateForm=_useState4[1];// State to track whether the form is visible\nvar history=useHistory();useEffect(function(){mountedRef.current=true;return function(){mountedRef.current=false;};},[]);useEffect(function(){var abortController=new AbortController();function loadDecks(){return _loadDecks.apply(this,arguments);}function _loadDecks(){_loadDecks=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _decks;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return listDecks();case 3:_decks=_context.sent;if(mountedRef.current){setDecks(function(_){return _toConsumableArray(_decks);});}_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);if(!(_context.t0.name!==\"AbortError\")){_context.next=11;break;}throw _context.t0;case 11:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return _loadDecks.apply(this,arguments);}loadDecks();return function(){return abortController.abort();};},[]);var deleteHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(deckId){var confirmation;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:confirmation=window.confirm(\"Delete this deck? You will not be able to recover it.\");if(!confirmation){_context2.next=5;break;}_context2.next=4;return deleteDeck(deckId);case 4:history.go(0);case 5:case\"end\":return _context2.stop();}},_callee2);}));return function deleteHandler(_x){return _ref.apply(this,arguments);};}();var toggleCreateForm=function toggleCreateForm(){setShowCreateForm(function(prevValue){return!prevValue;});};var styledDecks=decks.map(function(deck){return/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{width:\"100%\",marginTop:\"1em\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:deck.name}),/*#__PURE__*/_jsxs(\"p\",{children:[deck.cards.length,\" cards\"]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text text-secondary\",children:deck.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mt-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/decks/\".concat(deck.id),className:\"card-link\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary\",onClick:function onClick(){return history.push(\"/decks/\".concat(deck.id));},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-binoculars\"}),\" View\"]})}),/*#__PURE__*/_jsx(Link,{to:\"/decks/\".concat(deck.id,\"/study\"),className:\"card-link\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return history.push(\"/decks/\".concat(deck.id,\"/study\"));},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-book\"}),\" Study\"]})}),/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"card-link\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return deleteHandler(deck.id);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"}),\" Delete\"]})})]})]})},deck.id);});return/*#__PURE__*/_jsxs(React.Fragment,{children:[showCreateForm?/*#__PURE__*/_jsx(CreateDeck,{}):/*#__PURE__*/_jsx(Link,{to:\"#\",onClick:toggleCreateForm,children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"}),\" Create Deck\"]})}),decks?/*#__PURE__*/_jsx(React.Fragment,{children:styledDecks}):/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})]});}export default Home;","map":{"version":3,"names":["React","useEffect","useState","useRef","Link","useHistory","deleteDeck","listDecks","CreateDeck","jsx","_jsx","jsxs","_jsxs","Home","mountedRef","_useState","_useState2","_slicedToArray","decks","setDecks","_useState3","_useState4","showCreateForm","setShowCreateForm","history","current","abortController","AbortController","loadDecks","_loadDecks","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_decks","wrap","_callee$","_context","prev","next","sent","_","_toConsumableArray","t0","name","stop","abort","deleteHandler","_ref","_callee2","deckId","confirmation","_callee2$","_context2","window","confirm","go","_x","toggleCreateForm","prevValue","styledDecks","map","deck","className","style","width","marginTop","children","cards","length","description","to","concat","id","onClick","push","Fragment"],"sources":["/Users/matthewlewis/Documents/GitHub/Flashcard-App/src/Layout/Home.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { deleteDeck, listDecks } from \"../utils/api/index.js\";\nimport CreateDeck from \"./CreateDeck.js\";\n\nfunction Home() {\n  const mountedRef = useRef(false);\n  const [decks, setDecks] = useState([]);\n  const [showCreateForm, setShowCreateForm] = useState(false); // State to track whether the form is visible\n  const history = useHistory();\n\n  useEffect(() => {\n    mountedRef.current = true;\n    return () => {\n      mountedRef.current = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    const abortController = new AbortController();\n    async function loadDecks() {\n      try {\n        const decks = await listDecks();\n        if (mountedRef.current) {\n          setDecks((_) => [...decks]);\n        }\n      } catch (error) {\n        if (error.name !== \"AbortError\") {\n          throw error;\n        }\n      }\n    }\n    loadDecks();\n\n    return () => abortController.abort();\n  }, []);\n\n  const deleteHandler = async (deckId) => {\n    const confirmation = window.confirm(\n      \"Delete this deck? You will not be able to recover it.\"\n    );\n    if (confirmation) {\n      await deleteDeck(deckId);\n      history.go(0);\n    }\n  };\n\n  const toggleCreateForm = () => {\n    setShowCreateForm((prevValue) => !prevValue);\n  };\n\n  const styledDecks = decks.map((deck) => (\n    <div\n      key={deck.id}\n      className=\"card\"\n      style={{ width: \"100%\", marginTop: \"1em\" }}\n    >\n      <div className=\"card-body\">\n        <div className=\"d-flex justify-content-between\">\n          <h4 className=\"card-title\">{deck.name}</h4>\n          <p>{deck.cards.length} cards</p>\n        </div>\n        <p className=\"card-text text-secondary\">{deck.description}</p>\n        <div className=\"d-flex justify-content-between mt-4\">\n          <Link to={`/decks/${deck.id}`} className=\"card-link\">\n            <button\n              className=\"btn btn-secondary\"\n              onClick={() => history.push(`/decks/${deck.id}`)}\n            >\n              <i className=\"fas fa-binoculars\"></i> View\n            </button>\n          </Link>\n          <Link to={`/decks/${deck.id}/study`} className=\"card-link\">\n            <button\n              className=\"btn btn-primary\"\n              onClick={() => history.push(`/decks/${deck.id}/study`)}\n            >\n              <i className=\"fas fa-book\"></i> Study\n            </button>\n          </Link>\n          <Link to=\"#\" className=\"card-link\">\n            <button\n              className=\"btn btn-danger\"\n              onClick={() => deleteHandler(deck.id)}\n            >\n              <i className=\"fas fa-trash\"></i> Delete\n            </button>\n          </Link>\n        </div>\n      </div>\n    </div>\n  ));\n\n  return (\n    <React.Fragment>\n      {showCreateForm ? (\n        <CreateDeck />\n      ) : (\n        <Link to=\"#\" onClick={toggleCreateForm}>\n          <button className=\"btn btn-primary\">\n            <i className=\"fas fa-plus\"></i> Create Deck\n          </button>\n        </Link>\n      )}\n\n      {decks ? (\n        <React.Fragment>{styledDecks}</React.Fragment>\n      ) : (\n        <p>Loading...</p>\n      )}\n    </React.Fragment>\n  );\n}\n\nexport default Home;\n"],"mappings":"wjBAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,IAAI,CAAEC,UAAU,KAAQ,kBAAkB,CACnD,OAASC,UAAU,CAAEC,SAAS,KAAQ,uBAAuB,CAC7D,MAAO,CAAAC,UAAU,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEzC,QAAS,CAAAC,IAAIA,CAAA,CAAG,CACd,GAAM,CAAAC,UAAU,CAAGX,MAAM,CAAC,KAAK,CAAC,CAChC,IAAAY,SAAA,CAA0Bb,QAAQ,CAAC,EAAE,CAAC,CAAAc,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/BG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtB,IAAAI,UAAA,CAA4ClB,QAAQ,CAAC,KAAK,CAAC,CAAAmB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAApDE,cAAc,CAAAD,UAAA,IAAEE,iBAAiB,CAAAF,UAAA,IAAqB;AAC7D,GAAM,CAAAG,OAAO,CAAGnB,UAAU,CAAC,CAAC,CAE5BJ,SAAS,CAAC,UAAM,CACda,UAAU,CAACW,OAAO,CAAG,IAAI,CACzB,MAAO,WAAM,CACXX,UAAU,CAACW,OAAO,CAAG,KAAK,CAC5B,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAENxB,SAAS,CAAC,UAAM,CACd,GAAM,CAAAyB,eAAe,CAAG,GAAI,CAAAC,eAAe,CAAC,CAAC,CAAC,QAC/B,CAAAC,SAASA,CAAA,SAAAC,UAAA,CAAAC,KAAA,MAAAC,SAAA,YAAAF,WAAA,EAAAA,UAAA,CAAAG,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAxB,SAAAC,QAAA,MAAAC,MAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEwB,CAAAlC,SAAS,CAAC,CAAC,QAAzBW,MAAK,CAAAqB,QAAA,CAAAG,IAAA,CACX,GAAI5B,UAAU,CAACW,OAAO,CAAE,CACtBN,QAAQ,CAAC,SAACwB,CAAC,SAAAC,kBAAA,CAAS1B,MAAK,GAAC,CAAC,CAC7B,CAACqB,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAM,EAAA,CAAAN,QAAA,kBAEGA,QAAA,CAAAM,EAAA,CAAMC,IAAI,GAAK,YAAY,GAAAP,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAM,EAAA,0BAAAN,QAAA,CAAAQ,IAAA,MAAAZ,OAAA,gBAIlC,UAAAN,UAAA,CAAAC,KAAA,MAAAC,SAAA,GACDH,SAAS,CAAC,CAAC,CAEX,MAAO,kBAAM,CAAAF,eAAe,CAACsB,KAAK,CAAC,CAAC,GACtC,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAC,aAAa,6BAAAC,IAAA,CAAAlB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAiB,SAAOC,MAAM,MAAAC,YAAA,QAAApB,mBAAA,GAAAI,IAAA,UAAAiB,UAAAC,SAAA,iBAAAA,SAAA,CAAAf,IAAA,CAAAe,SAAA,CAAAd,IAAA,SAC3BY,YAAY,CAAGG,MAAM,CAACC,OAAO,CACjC,uDACF,CAAC,KACGJ,YAAY,EAAAE,SAAA,CAAAd,IAAA,UAAAc,SAAA,CAAAd,IAAA,SACR,CAAAnC,UAAU,CAAC8C,MAAM,CAAC,QACxB5B,OAAO,CAACkC,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAAH,SAAA,CAAAR,IAAA,MAAAI,QAAA,GAEjB,kBARK,CAAAF,aAAaA,CAAAU,EAAA,SAAAT,IAAA,CAAApB,KAAA,MAAAC,SAAA,OAQlB,CAED,GAAM,CAAA6B,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAA,CAAS,CAC7BrC,iBAAiB,CAAC,SAACsC,SAAS,QAAK,CAACA,SAAS,GAAC,CAC9C,CAAC,CAED,GAAM,CAAAC,WAAW,CAAG5C,KAAK,CAAC6C,GAAG,CAAC,SAACC,IAAI,qBACjCtD,IAAA,QAEEuD,SAAS,CAAC,MAAM,CAChBC,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAM,CAAEC,SAAS,CAAE,KAAM,CAAE,CAAAC,QAAA,cAE3CzD,KAAA,QAAKqD,SAAS,CAAC,WAAW,CAAAI,QAAA,eACxBzD,KAAA,QAAKqD,SAAS,CAAC,gCAAgC,CAAAI,QAAA,eAC7C3D,IAAA,OAAIuD,SAAS,CAAC,YAAY,CAAAI,QAAA,CAAEL,IAAI,CAAClB,IAAI,CAAK,CAAC,cAC3ClC,KAAA,MAAAyD,QAAA,EAAIL,IAAI,CAACM,KAAK,CAACC,MAAM,CAAC,QAAM,EAAG,CAAC,EAC7B,CAAC,cACN7D,IAAA,MAAGuD,SAAS,CAAC,0BAA0B,CAAAI,QAAA,CAAEL,IAAI,CAACQ,WAAW,CAAI,CAAC,cAC9D5D,KAAA,QAAKqD,SAAS,CAAC,qCAAqC,CAAAI,QAAA,eAClD3D,IAAA,CAACN,IAAI,EAACqE,EAAE,WAAAC,MAAA,CAAYV,IAAI,CAACW,EAAE,CAAG,CAACV,SAAS,CAAC,WAAW,CAAAI,QAAA,cAClDzD,KAAA,WACEqD,SAAS,CAAC,mBAAmB,CAC7BW,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAApD,OAAO,CAACqD,IAAI,WAAAH,MAAA,CAAWV,IAAI,CAACW,EAAE,CAAE,CAAC,EAAC,CAAAN,QAAA,eAEjD3D,IAAA,MAAGuD,SAAS,CAAC,mBAAmB,CAAI,CAAC,QACvC,EAAQ,CAAC,CACL,CAAC,cACPvD,IAAA,CAACN,IAAI,EAACqE,EAAE,WAAAC,MAAA,CAAYV,IAAI,CAACW,EAAE,UAAS,CAACV,SAAS,CAAC,WAAW,CAAAI,QAAA,cACxDzD,KAAA,WACEqD,SAAS,CAAC,iBAAiB,CAC3BW,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAApD,OAAO,CAACqD,IAAI,WAAAH,MAAA,CAAWV,IAAI,CAACW,EAAE,UAAQ,CAAC,EAAC,CAAAN,QAAA,eAEvD3D,IAAA,MAAGuD,SAAS,CAAC,aAAa,CAAI,CAAC,SACjC,EAAQ,CAAC,CACL,CAAC,cACPvD,IAAA,CAACN,IAAI,EAACqE,EAAE,CAAC,GAAG,CAACR,SAAS,CAAC,WAAW,CAAAI,QAAA,cAChCzD,KAAA,WACEqD,SAAS,CAAC,gBAAgB,CAC1BW,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA3B,aAAa,CAACe,IAAI,CAACW,EAAE,CAAC,EAAC,CAAAN,QAAA,eAEtC3D,IAAA,MAAGuD,SAAS,CAAC,cAAc,CAAI,CAAC,UAClC,EAAQ,CAAC,CACL,CAAC,EACJ,CAAC,EACH,CAAC,EApCDD,IAAI,CAACW,EAqCP,CAAC,EACP,CAAC,CAEF,mBACE/D,KAAA,CAACZ,KAAK,CAAC8E,QAAQ,EAAAT,QAAA,EACZ/C,cAAc,cACbZ,IAAA,CAACF,UAAU,GAAE,CAAC,cAEdE,IAAA,CAACN,IAAI,EAACqE,EAAE,CAAC,GAAG,CAACG,OAAO,CAAEhB,gBAAiB,CAAAS,QAAA,cACrCzD,KAAA,WAAQqD,SAAS,CAAC,iBAAiB,CAAAI,QAAA,eACjC3D,IAAA,MAAGuD,SAAS,CAAC,aAAa,CAAI,CAAC,eACjC,EAAQ,CAAC,CACL,CACP,CAEA/C,KAAK,cACJR,IAAA,CAACV,KAAK,CAAC8E,QAAQ,EAAAT,QAAA,CAAEP,WAAW,CAAiB,CAAC,cAE9CpD,IAAA,MAAA2D,QAAA,CAAG,YAAU,CAAG,CACjB,EACa,CAAC,CAErB,CAEA,cAAe,CAAAxD,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}