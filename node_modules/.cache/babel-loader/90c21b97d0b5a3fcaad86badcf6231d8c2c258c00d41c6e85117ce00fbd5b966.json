{"ast":null,"code":"import _regeneratorRuntime from\"/Users/matthewlewis/Documents/GitHub/Flashcard-App/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/matthewlewis/Documents/GitHub/Flashcard-App/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/matthewlewis/Documents/GitHub/Flashcard-App/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/matthewlewis/Documents/GitHub/Flashcard-App/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useRef}from\"react\";import{Link,useParams}from\"react-router-dom\";import{readDeck}from\"../utils/api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function StudyDeck(){var mountedRef=useRef(false);var initialState={deck:{name:\"loading...\",cards:[]},isCardFlipped:false,currentIndex:0};var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),studyDeckState=_useState2[0],setStudyDeckState=_useState2[1];var deck=studyDeckState.deck,isCardFlipped=studyDeckState.isCardFlipped,currentIndex=studyDeckState.currentIndex;var _useParams=useParams(),deckId=_useParams.deckId;useEffect(function(){mountedRef.current=true;return function(){mountedRef.current=false;};},[]);useEffect(function(){var abortController=new AbortController();function loadDeck(){return _loadDeck.apply(this,arguments);}function _loadDeck(){_loadDeck=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var loadedDeck;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return readDeck(deckId,abortController.signal);case 3:loadedDeck=_context.sent;if(mountedRef.current){setStudyDeckState(function(currentState){return _objectSpread(_objectSpread({},currentState),{},{deck:loadedDeck});});}_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);if(!(_context.t0.name!==\"AbortError\")){_context.next=11;break;}throw _context.t0;case 11:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return _loadDeck.apply(this,arguments);}loadDeck();return function(){abortController.abort();};},[deckId]);function flipCardHandler(){setStudyDeckState(_objectSpread(_objectSpread({},studyDeckState),{},{isCardFlipped:!studyDeckState[\"isCardFlipped\"]}));}function getNextCardHandler(){var cards=deck.cards;if(currentIndex===cards.length-1){var response=window.confirm(\"Do you want to restart the deck and study again?\");if(response){setStudyDeckState(function(currentState){return _objectSpread(_objectSpread({},currentState),{},{currentIndex:0});});}}else{setStudyDeckState(function(currentState){return _objectSpread(_objectSpread({},currentState),{},{currentIndex:currentState.currentIndex+1,isCardFlipped:!currentState.isCardFlipped});});}}var breadcrumb=/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"breadcrumb\",children:/*#__PURE__*/_jsxs(\"ol\",{className:\"breadcrumb\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsxs(Link,{to:\"/\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-home\"}),\" Home\"]})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/decks/\".concat(deckId),children:deck.name})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item active\",\"aria-current\":\"page\",children:\"Study\"})]})});if(deck.cards.length<=2){return/*#__PURE__*/_jsxs(React.Fragment,{children:[breadcrumb,/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[deck.name,\": Study\"]}),/*#__PURE__*/_jsx(\"h2\",{className:\"card-title\",children:\"Not enough cards.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:\"You need at least 3 cards to study. Please add more cards to this deck.\"}),/*#__PURE__*/_jsx(Link,{to:\"/decks/\".concat(deckId,\"/cards/new\"),children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-primary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"}),\" Add Card\"]})})]})})]});}else{return/*#__PURE__*/_jsxs(React.Fragment,{children:[breadcrumb,/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center\",children:[\"Currently Studying: \",deck.name,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"card-title\",children:[\"Card \",currentIndex+1,\" of \",deck.cards.length]}),/*#__PURE__*/_jsx(\"h5\",{className:\"card-text\",children:!isCardFlipped?\"Question: \".concat(deck.cards[currentIndex].front):\"Answer: \".concat(deck.cards[currentIndex].back)})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary py-3\",onClick:flipCardHandler,children:\"Flip\"}),isCardFlipped&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary py-3\",onClick:getNextCardHandler,children:\"Next\"})]})]});}}export default StudyDeck;","map":{"version":3,"names":["React","useEffect","useState","useRef","Link","useParams","readDeck","jsx","_jsx","jsxs","_jsxs","StudyDeck","mountedRef","initialState","deck","name","cards","isCardFlipped","currentIndex","_useState","_useState2","_slicedToArray","studyDeckState","setStudyDeckState","_useParams","deckId","current","abortController","AbortController","loadDeck","_loadDeck","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","loadedDeck","wrap","_callee$","_context","prev","next","signal","sent","currentState","_objectSpread","t0","stop","abort","flipCardHandler","getNextCardHandler","length","response","window","confirm","breadcrumb","children","className","to","concat","Fragment","type","front","back","onClick"],"sources":["/Users/matthewlewis/Documents/GitHub/Flashcard-App/src/Layout/StudyDeck.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { readDeck } from \"../utils/api\";\n\nfunction StudyDeck() {\n  const mountedRef = useRef(false);\n  const initialState = {\n    deck: { name: \"loading...\", cards: [] },\n    isCardFlipped: false,\n    currentIndex: 0,\n  };\n\n  const [studyDeckState, setStudyDeckState] = useState(initialState);\n  const { deck, isCardFlipped, currentIndex } = studyDeckState;\n\n  const { deckId } = useParams();\n\n  useEffect(() => {\n    mountedRef.current = true;\n    return () => {\n      mountedRef.current = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    const abortController = new AbortController();\n    async function loadDeck() {\n      try {\n        const loadedDeck = await readDeck(deckId, abortController.signal);\n        if (mountedRef.current) {\n          setStudyDeckState((currentState) => ({\n            ...currentState,\n            deck: loadedDeck,\n          }));\n        }\n      } catch (error) {\n        if (error.name !== \"AbortError\") {\n          throw error;\n        }\n      }\n    }\n    loadDeck();\n    return () => {\n      abortController.abort();\n    };\n  }, [deckId]);\n\n  function flipCardHandler() {\n    setStudyDeckState({\n      ...studyDeckState,\n      isCardFlipped: !studyDeckState[\"isCardFlipped\"],\n    });\n  }\n\n  function getNextCardHandler() {\n    const { cards } = deck;\n    if (currentIndex === cards.length - 1) {\n      const response = window.confirm(\n        \"Do you want to restart the deck and study again?\"\n      );\n      if (response) {\n        setStudyDeckState((currentState) => ({\n          ...currentState,\n          currentIndex: 0,\n        }));\n      }\n    } else {\n      setStudyDeckState((currentState) => ({\n        ...currentState,\n        currentIndex: currentState.currentIndex + 1,\n        isCardFlipped: !currentState.isCardFlipped,\n      }));\n    }\n  }\n\n  const breadcrumb = (\n    <nav aria-label=\"breadcrumb\">\n      <ol className=\"breadcrumb\">\n        <li className=\"breadcrumb-item\">\n          <Link to=\"/\">\n            <i className=\"fas fa-home\"></i> Home\n          </Link>\n        </li>\n        <li className=\"breadcrumb-item\">\n          <Link to={`/decks/${deckId}`}>{deck.name}</Link>\n        </li>\n        <li className=\"breadcrumb-item active\" aria-current=\"page\">\n          Study\n        </li>\n      </ol>\n    </nav>\n  );\n\n  if (deck.cards.length <= 2) {\n    return (\n      <React.Fragment>\n        {breadcrumb}\n        <div className=\"card\">\n          <div className=\"card-body\">\n            <h1>{deck.name}: Study</h1>\n            <h2 className=\"card-title\">Not enough cards.</h2>\n            <p className=\"card-text\">\n              You need at least 3 cards to study. Please add more cards to this\n              deck.\n            </p>\n            <Link to={`/decks/${deckId}/cards/new`}>\n              <button type=\"button\" className=\"btn btn-primary\">\n                <i className=\"fas fa-plus\"></i> Add Card\n              </button>\n            </Link>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  } else {\n    return (\n      <React.Fragment>\n        {breadcrumb}\n        <h1 className=\"text-center\">Currently Studying: {deck.name} </h1>\n        <div className=\"card\">\n          <div className=\"card-body\">\n            <h4 className=\"card-title\">\n              Card {currentIndex + 1} of {deck.cards.length}\n            </h4>\n            <h5 className=\"card-text\">\n              {!isCardFlipped\n                ? `Question: ${deck.cards[currentIndex].front}`\n                : `Answer: ${deck.cards[currentIndex].back}`}\n            </h5>\n          </div>\n          <button\n            type=\"button\"\n            className=\"btn btn-secondary py-3\"\n            onClick={flipCardHandler}\n          >\n            Flip\n          </button>\n          {isCardFlipped && (\n            <button\n              className=\"btn btn-primary py-3\"\n              onClick={getNextCardHandler}\n            >\n              Next\n            </button>\n          )}\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default StudyDeck;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}