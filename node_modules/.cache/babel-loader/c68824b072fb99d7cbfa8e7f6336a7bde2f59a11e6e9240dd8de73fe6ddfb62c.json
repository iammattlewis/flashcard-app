{"ast":null,"code":"import _defineProperty from\"/Users/matthewlewis/Documents/GitHub/Flashcard-App/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/matthewlewis/Documents/GitHub/Flashcard-App/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/matthewlewis/Documents/GitHub/Flashcard-App/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/matthewlewis/Documents/GitHub/Flashcard-App/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/matthewlewis/Documents/GitHub/Flashcard-App/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useRef}from\"react\";import{Link,useParams,useHistory}from\"react-router-dom\";import{readDeck,createCard}from\"../utils/api\";import CardForm from\"./CardForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function AddCard(){var mountedRef=useRef(false);var initialFormState={id:\"\",front:\"\",back:\"\",deckId:\"\"};var _useState=useState({name:\"loading...\",description:\"\",cards:[]}),_useState2=_slicedToArray(_useState,2),deck=_useState2[0],setDeck=_useState2[1];var _useState3=useState(initialFormState),_useState4=_slicedToArray(_useState3,2),newCardData=_useState4[0],setNewCardData=_useState4[1];var history=useHistory();var _useParams=useParams(),deckId=_useParams.deckId;useEffect(function(){mountedRef.current=true;return function(){mountedRef.current=false;};},[]);useEffect(function(){var abortController=new AbortController();function loadDeck(){return _loadDeck.apply(this,arguments);}function _loadDeck(){_loadDeck=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var loadedDeck;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return readDeck(deckId,abortController.signal);case 3:loadedDeck=_context.sent;if(mountedRef.current){setDeck(function(){return loadedDeck;});}_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);if(!(_context.t0.name!==\"AbortError\")){_context.next=11;break;}throw _context.t0;case 11:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return _loadDeck.apply(this,arguments);}loadDeck();return function(){abortController.abort();};},[deckId]);var changeHandler=function changeHandler(_ref){var target=_ref.target;setNewCardData(function(currentState){return _objectSpread(_objectSpread({},currentState),{},_defineProperty({},target.name,target.value));});};var submitHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:event.preventDefault();_context2.next=3;return createCard(deckId,newCardData);case 3:setNewCardData(initialFormState);history.go(0);case 5:case\"end\":return _context2.stop();}},_callee2);}));return function submitHandler(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"breadcrumb\",children:/*#__PURE__*/_jsxs(\"ol\",{className:\"breadcrumb\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsxs(Link,{to:\"/\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-home\"}),\" Home\"]})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/decks/\".concat(deckId),children:deck.name})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item active\",\"aria-current\":\"page\",children:\"Edit Deck\"})]})}),/*#__PURE__*/_jsxs(\"h1\",{className:\"my-4 text-center\",children:[deck.name,\": \",/*#__PURE__*/_jsx(\"span\",{children:\"Add Card\"})]}),/*#__PURE__*/_jsx(CardForm,{changeHandler:changeHandler,submitHandler:submitHandler,newCardData:newCardData,deckId:deckId})]});}export default AddCard;","map":{"version":3,"names":["React","useEffect","useState","useRef","Link","useParams","useHistory","readDeck","createCard","CardForm","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AddCard","mountedRef","initialFormState","id","front","back","deckId","_useState","name","description","cards","_useState2","_slicedToArray","deck","setDeck","_useState3","_useState4","newCardData","setNewCardData","history","_useParams","current","abortController","AbortController","loadDeck","_loadDeck","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","loadedDeck","wrap","_callee$","_context","prev","next","signal","sent","t0","stop","abort","changeHandler","_ref","target","currentState","_objectSpread","_defineProperty","value","submitHandler","_ref2","_callee2","event","_callee2$","_context2","preventDefault","go","_x","children","className","to","concat"],"sources":["/Users/matthewlewis/Documents/GitHub/Flashcard-App/src/Layout/AddCard.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { Link, useParams, useHistory } from \"react-router-dom\";\nimport { readDeck, createCard } from \"../utils/api\";\nimport CardForm from \"./CardForm\";\n\nfunction AddCard() {\n  const mountedRef = useRef(false);\n  const initialFormState = {\n    id: \"\",\n    front: \"\",\n    back: \"\",\n    deckId: \"\",\n  };\n  const [deck, setDeck] = useState({\n    name: \"loading...\",\n    description: \"\",\n    cards: [],\n  });\n  const [newCardData, setNewCardData] = useState(initialFormState);\n  const history = useHistory();\n  const { deckId } = useParams();\n\n  useEffect(() => {\n    mountedRef.current = true;\n    return () => {\n      mountedRef.current =false;\n    };\n  }, []);\n\n  useEffect(() => {\n    const abortController = new AbortController();\n    async function loadDeck() {\n      try {\n        const loadedDeck = await readDeck(deckId, abortController.signal);\n        if (mountedRef.current) {\n          setDeck(() => loadedDeck);\n        }\n      } catch (error) {\n        if (error.name !== \"AbortError\") {\n          throw error;\n        }\n      }\n    }\n    loadDeck();\n    return () => {\n      abortController.abort();\n    };\n  }, [deckId]);\n\n  const changeHandler = ({ target }) => {\n    setNewCardData((currentState) => ({\n      ...currentState,\n      [target.name]: target.value,\n    }));\n  };\n\n  const submitHandler = async (event) => {\n    event.preventDefault();\n    await createCard(deckId, newCardData);\n    setNewCardData(initialFormState);\n    history.go(0);\n  };\n\n  return (\n    <>\n      <nav aria-label=\"breadcrumb\">\n        <ol className=\"breadcrumb\">\n          <li className=\"breadcrumb-item\">\n            <Link to=\"/\">\n              <i className=\"fas fa-home\"></i> Home\n            </Link>\n          </li>\n          <li className=\"breadcrumb-item\">\n            <Link to={`/decks/${deckId}`}>{deck.name}</Link>\n          </li>\n          <li className=\"breadcrumb-item active\" aria-current=\"page\">\n            Edit Deck\n          </li>\n        </ol>\n      </nav>\n      <h1 className=\"my-4 text-center\">\n        {deck.name}: <span>Add Card</span>\n      </h1>\n      <CardForm\n        changeHandler={changeHandler}\n        submitHandler={submitHandler}\n        newCardData={newCardData}\n        deckId={deckId}\n      />  \n    </>\n  );\n}\n\nexport default AddCard;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}